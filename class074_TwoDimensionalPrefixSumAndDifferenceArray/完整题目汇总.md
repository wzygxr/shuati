# 二维前缀和与差分数组完整题目汇总

## 一、LeetCode 相关题目

### 1.1 基础前缀和题目

#### 题目1: Range Sum Query - Immutable (303)
- **题目链接**: https://leetcode.com/problems/range-sum-query-immutable/
- **难度**: Easy
- **核心算法**: 一维前缀和
- **题目描述**: 给定一个整数数组，实现一个类来支持多次查询区间和
- **最优解**: 一维前缀和，查询O(1)，构建O(n)
- **相关文件**: 
  - [Code06_RangeSumQuery2DImmutable.java](Code06_RangeSumQuery2DImmutable.java)
  - [Code06_RangeSumQuery2DImmutable.cpp](Code06_RangeSumQuery2DImmutable.cpp)
  - [Code06_RangeSumQuery2DImmutable.py](Code06_RangeSumQuery2DImmutable.py)

#### 题目2: Range Sum Query 2D - Immutable (304)
- **题目链接**: https://leetcode.com/problems/range-sum-query-2d-immutable/
- **难度**: Medium
- **核心算法**: 二维前缀和
- **题目描述**: 给定一个二维矩阵，实现一个类来支持多次查询子矩阵和
- **最优解**: 二维前缀和，查询O(1)，构建O(m*n)
- **相关文件**: 
  - [Code01_PrefixSumMatrix.java](Code01_PrefixSumMatrix.java)
  - [Code01_PrefixSumMatrix.cpp](Code01_PrefixSumMatrix.cpp)
  - [Code01_PrefixSumMatrix.py](Code01_PrefixSumMatrix.py)
  - [Code06_RangeSumQuery2DImmutable.java](Code06_RangeSumQuery2DImmutable.java)
  - [Code06_RangeSumQuery2DImmutable.cpp](Code06_RangeSumQuery2DImmutable.cpp)
  - [Code06_RangeSumQuery2DImmutable.py](Code06_RangeSumQuery2DImmutable.py)

#### 题目3: Maximum Side Length of a Square with Sum Less than or Equal to Threshold (1292)
- **题目链接**: https://leetcode.com/problems/maximum-side-length-of-a-square-with-sum-less-than-or-equal-to-threshold/
- **难度**: Medium
- **核心算法**: 二维前缀和 + 二分查找
- **题目描述**: 找到最大的正方形边长，使得正方形内元素和不超过阈值
- **最优解**: 二维前缀和 + 二分查找，时间复杂度O(m*n*log(min(m,n)))

### 1.2 差分数组题目

#### 题目4: Corporate Flight Bookings (1109)
- **题目链接**: https://leetcode.com/problems/corporate-flight-bookings/
- **难度**: Medium
- **核心算法**: 一维差分数组
- **题目描述**: 处理航班预订记录，计算每个航班的座位数
- **最优解**: 差分数组，时间复杂度O(n)
- **相关文件**: 
  - [Code07_CorporateFlightBookings.java](Code07_CorporateFlightBookings.java)
  - [Code07_CorporateFlightBookings.cpp](Code07_CorporateFlightBookings.cpp)
  - [Code07_CorporateFlightBookings.py](Code07_CorporateFlightBookings.py)

#### 题目5: Range Addition (370)
- **题目链接**: https://leetcode.com/problems/range-addition/
- **难度**: Medium
- **核心算法**: 一维差分数组
- **题目描述**: 给定初始全0数组，执行k次区间加法操作
- **最优解**: 差分数组，时间复杂度O(n+k)

#### 题目6: Increment Submatrices by One (2536)
- **题目链接**: https://leetcode.com/problems/increment-submatrices-by-one/
- **难度**: Medium
- **核心算法**: 二维差分数组
- **题目描述**: 对多个子矩阵执行+1操作，返回最终矩阵
- **最优解**: 二维差分数组，时间复杂度O(k + m*n)
- **相关文件**: 
  - [Code08_IncrementSubmatricesByOne.java](Code08_IncrementSubmatricesByOne.java)
  - [Code08_IncrementSubmatricesByOne.cpp](Code08_IncrementSubmatricesByOne.cpp)
  - [Code08_IncrementSubmatricesByOne.py](Code08_IncrementSubmatricesByOne.py)

### 1.3 综合应用题目

#### 题目7: Largest 1-Bordered Square (1139)
- **题目链接**: https://leetcode.com/problems/largest-1-bordered-square/
- **难度**: Medium
- **核心算法**: 二维前缀和
- **题目描述**: 找到边界全为1的最大正方形
- **最优解**: 二维前缀和，时间复杂度O(n*m*min(n,m))
- **相关文件**: 
  - [Code02_LargestOneBorderedSquare.java](Code02_LargestOneBorderedSquare.java)
  - [Code02_LargestOneBorderedSquare.cpp](Code02_LargestOneBorderedSquare.cpp)
  - [Code02_LargestOneBorderedSquare.py](Code02_LargestOneBorderedSquare.py)

#### 题目8: Number of Submatrices That Sum to Target (1074)
- **题目链接**: https://leetcode.com/problems/number-of-submatrices-that-sum-to-target/
- **难度**: Hard
- **核心算法**: 二维前缀和 + 哈希表
- **题目描述**: 计算和为target的子矩阵数量
- **最优解**: 二维前缀和 + 哈希表，时间复杂度O(m²*n)

#### 题目9: Max Sum of Rectangle No Larger Than K (363)
- **题目链接**: https://leetcode.com/problems/max-sum-of-rectangle-no-larger-than-k/
- **难度**: Hard
- **核心算法**: 二维前缀和 + 有序集合
- **题目描述**: 找到不超过k的最大子矩阵和
- **最优解**: 二维前缀和 + 有序集合，时间复杂度O(m²*n*log n)

#### 题目10: Stamping The Grid (2132)
- **题目链接**: https://leetcode.com/problems/stamping-the-grid/
- **难度**: Hard
- **核心算法**: 二维前缀和 + 二维差分数组
- **题目描述**: 判断是否能用固定尺寸的邮票覆盖所有空格子
- **最优解**: 二维前缀和 + 二维差分数组，时间复杂度O(m*n)
- **相关文件**: 
  - [Code04_StampingTheGrid.java](Code04_StampingTheGrid.java)

#### 题目11: Trapping Rain Water (42)
- **题目链接**: https://leetcode.com/problems/trapping-rain-water/
- **难度**: Hard
- **核心算法**: 双指针法/动态规划/单调栈
- **题目描述**: 计算柱状图能接多少雨水
- **最优解**: 双指针法，时间复杂度O(n)，空间复杂度O(1)
- **相关文件**: 
  - [Code18_TrappingRainWater.java](Code18_TrappingRainWater.java)
  - [Code18_TrappingRainWater.cpp](Code18_TrappingRainWater.cpp)
  - [Code18_TrappingRainWater.py](Code18_TrappingRainWater.py)

## 二、Codeforces 题目

#### 题目12: C. Star sky (835C)
- **题目链接**: https://codeforces.com/problemset/problem/835/C
- **难度**: 1400
- **核心算法**: 二维前缀和
- **题目描述**: 在星空坐标系中，星星亮度随时间变化，计算特定时间特定区域的总亮度
- **最优解**: 二维前缀和，时间复杂度O(1)查询

#### 题目13: D. Maximum Sum on Even Positions (1373D)
- **题目链接**: https://codeforces.com/problemset/problem/1373/D
- **难度**: 1600
- **核心算法**: 前缀和 + 最大子数组和
- **题目描述**: 通过反转子数组最大化偶数位置的和
- **最优解**: Kadane算法变种，时间复杂度O(n)

#### 题目14: B. Karen and Coffee (816B)
- **题目链接**: https://codeforces.com/problemset/problem/816/B
- **难度**: 1400
- **核心算法**: 一维差分数组
- **题目描述**: 统计满足温度范围的咖啡建议数量
- **最优解**: 差分数组 + 前缀和，时间复杂度O(n)

## 三、AtCoder 题目

#### 题目15: D - AtCoder Express 2 (ABC106D)
- **题目链接**: https://atcoder.jp/contests/abc106/tasks/abc106_d
- **难度**: 400点
- **核心算法**: 二维前缀和
- **题目描述**: 统计满足条件的火车路线数量
- **最优解**: 二维前缀和，时间复杂度O(n²)

## 四、HDU/POJ 题目

#### 题目16: HDU 1559 - 最大子矩阵
- **题目链接**: http://acm.hdu.edu.cn/showproblem.php?pid=1559
- **难度**: 中等
- **核心算法**: 二维前缀和
- **题目描述**: 在给定大小的子矩阵中找最大和
- **最优解**: 二维前缀和，时间复杂度O(n*m)

#### 题目17: POJ 1050 - To the Max
- **题目链接**: http://poj.org/problem?id=1050
- **难度**: 中等
- **核心算法**: 二维前缀和 + 最大子数组和
- **题目描述**: 找到二维矩阵中的最大子矩阵和
- **最优解**: 压缩维度 + Kadane算法，时间复杂度O(n³)

#### 题目18: HDU 1081 - To The Max
- **题目链接**: http://acm.hdu.edu.cn/showproblem.php?pid=1081
- **难度**: 中等
- **核心算法**: 二维前缀和
- **题目描述**: 与POJ 1050相同
- **最优解**: 压缩维度 + Kadane算法，时间复杂度O(n³)

#### 题目19: HDU 1556 - Color the ball
- **题目链接**: http://acm.hdu.edu.cn/showproblem.php?pid=1556
- **难度**: 入门
- **核心算法**: 一维差分数组
- **题目描述**: 多次对区间进行染色操作，统计每个球被染色的次数
- **最优解**: 一维差分数组，时间复杂度O(n)

## 五、洛谷题目

#### 题目20: P1719 - 最大加权矩形
- **题目链接**: https://www.luogu.com.cn/problem/P1719
- **难度**: 普及/提高-
- **核心算法**: 二维前缀和
- **题目描述**: 求最大子矩阵和
- **最优解**: 压缩维度 + 最大子数组和，时间复杂度O(n³)

#### 题目21: P3397 - 地毯
- **题目链接**: https://www.luogu.com.cn/problem/P3397
- **难度**: 普及-
- **核心算法**: 二维差分数组
- **题目描述**: 多次铺地毯，求最终每个位置的地毯层数
- **最优解**: 二维差分数组，时间复杂度O(n² + k)
- **相关文件**: 
  - [Code03_DiffMatrixLuogu.java](Code03_DiffMatrixLuogu.java)
  - [Code03_DiffMatrixLuogu.cpp](Code03_DiffMatrixLuogu.cpp)
  - [Code03_DiffMatrixLuogu.py](Code03_DiffMatrixLuogu.py)

#### 题目22: P2004 - 领地选择
- **题目链接**: https://www.luogu.com.cn/problem/P2004
- **难度**: 入门
- **核心算法**: 二维前缀和
- **题目描述**: 在n*m的矩阵中选择一个s*s的正方形区域，使其和最大
- **最优解**: 二维前缀和，时间复杂度O(n*m)

## 六、牛客题目

#### 题目23: 牛客 226337 二维差分
- **题目链接**: https://www.nowcoder.com/practice/50e1a93989df42efb0b1dec386fb4ccc
- **难度**: 中等
- **核心算法**: 二维差分数组
- **题目描述**: 实现二维差分数组的基本操作
- **最优解**: 二维差分数组，时间复杂度O(1)更新

## 七、其他平台题目

#### 题目24: LCP 74 - 最强祝福力场
- **题目链接**: https://leetcode.cn/problems/xepqZ5/
- **难度**: Hard
- **核心算法**: 离散化 + 二维差分数组
- **题目描述**: 计算重叠力场区域的最大强度
- **最优解**: 离散化 + 二维差分数组，时间复杂度O(n²)
- **相关文件**: 
  - [Code05_StrongestForceField.java](Code05_StrongestForceField.java)

#### 题目25: USACO Training - Painting the Barn
- **题目链接**: http://www.usaco.org/index.php?page=viewproblem2&cpid=923
- **难度**: Gold
- **核心算法**: 二维差分数组 + 扫描线
- **题目描述**: 计算被涂了恰好k层的面积
- **最优解**: 二维差分数组，时间复杂度O(n²)

## 八、题目分类总结

### 8.1 按算法类型分类

#### 一维前缀和应用
- 区间和查询问题（LeetCode 303）
- 滑动窗口统计问题
- 子数组和问题

#### 二维前缀和应用  
- 子矩阵和查询（LeetCode 304）
- 最大子矩阵问题（HDU 1559, POJ 1050）
- 矩阵统计问题

#### 一维差分应用
- 区间更新问题（LeetCode 370, 1109）
- 多次区间操作问题
- 资源分配问题

#### 二维差分应用
- 子矩阵更新问题（LeetCode 2536）
- 多次区域操作问题
- 图像处理中的区域操作

#### 离散化应用
- 浮点数坐标处理（LCP 74）
- 大范围坐标压缩
- 扫描线算法

### 8.2 按难度分类

#### 入门级（Easy）
- LeetCode 303: Range Sum Query - Immutable
- 基础的一维前缀和应用
- HDU 1556: Color the ball

#### 进阶级（Medium）  
- LeetCode 304: Range Sum Query 2D - Immutable
- LeetCode 1109: Corporate Flight Bookings
- LeetCode 1139: Largest 1-Bordered Square
- 基础的二维前缀和与差分应用

#### 高手级（Hard）
- LeetCode 1074: Number of Submatrices That Sum to Target
- LeetCode 363: Max Sum of Rectangle No Larger Than K
- LeetCode 2132: Stamping The Grid
- 需要结合其他算法的综合应用

### 8.3 按应用场景分类

#### 查询密集型
- 需要多次查询不同区域的和
- 适合使用前缀和算法
- 典型题目：LeetCode 303, 304

#### 更新密集型  
- 需要多次更新不同区域的值
- 适合使用差分数组算法
- 典型题目：LeetCode 370, 1109

#### 综合应用型
- 需要结合多种算法思想
- 通常需要优化时间复杂度
- 典型题目：LeetCode 1074, 363, 2132

## 九、训练建议

### 9.1 学习路径建议
1. **初级阶段**: 先掌握一维前缀和与差分
   - LeetCode 303, 370
   - 理解基本思想和时间复杂度分析

2. **中级阶段**: 学习二维前缀和与差分  
   - LeetCode 304, 1109
   - 掌握容斥原理的应用

3. **高级阶段**: 综合应用训练
   - LeetCode 1139, 1292, 2132
   - 学习算法组合和优化技巧

### 9.2 刷题顺序建议
1. 一维前缀和基础 → 2. 一维差分基础 → 3. 二维前缀和基础 → 4. 二维差分基础 → 5. 综合应用

### 9.3 重点题目推荐
- **必做题**: LeetCode 303, 304, 370, 1109
- **提高题**: LeetCode 1139, 1292, 2132  
- **挑战题**: LeetCode 1074, 363, LCP 74

通过系统练习这些题目，可以全面掌握前缀和与差分数组算法的应用技巧。