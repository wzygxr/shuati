# 数位DP扩展题目详解

以下是在学习数位DP过程中可以练习的更多题目，涵盖各大OJ平台，包含完整的题目描述、解题思路和代码实现。

## 一、LeetCode题目

### 1. 233. 数字 1 的个数
- **题目链接**: https://leetcode.cn/problems/number-of-digit-one/
- **题目描述**: 给定一个整数 n，计算所有小于等于 n 的非负整数中数字 1 出现的个数。
- **解题思路**: 
  1. 数位DP方法：使用数位DP框架，逐位确定数字
  2. 状态设计需要记录：
     - 当前处理位置
     - 是否受上界限制
     - 当前已出现的1的个数
  3. 关键点：统计1出现的次数而不是数字个数
- **时间复杂度**: O(log n)
- **空间复杂度**: O(log n)
- **相关文件**: Code05_CountDigitOne.java, Code05_CountDigitOne.py

### 2. 600. 不含连续1的非负整数
- **题目链接**: https://leetcode.cn/problems/non-negative-integers-without-consecutive-ones/
- **题目描述**: 给定一个正整数 n，返回在 [0, n] 范围内不含连续1的非负整数的个数。
- **解题思路**:
  1. 数位DP方法：使用数位DP框架，逐位确定二进制数字
  2. 状态设计需要记录：
     - 当前处理位置
     - 是否受上界限制
     - 前一位是否为1
  3. 关键点：当前位不能与前一位同时为1
- **时间复杂度**: O(log n)
- **空间复杂度**: O(log n)
- **相关文件**: Code06_NonNegativeIntegersWithoutConsecutiveOnes.java, Code16_NumberWithoutConsecutiveOnes.java

### 3. 1012. 至少有 1 位重复的数字
- **题目链接**: https://leetcode.cn/problems/numbers-with-repeated-digits/
- **题目描述**: 给定正整数 n，返回在 [1, n] 范围内具有至少 1 位重复数字的正整数的个数。
- **解题思路**:
  1. 补集思想：统计没有重复数字的数字个数，然后用总数减去它
  2. 数位DP方法：使用数位DP框架，逐位确定数字
  3. 状态设计需要记录：
     - 当前处理位置
     - 是否受上界限制
     - 是否已开始填数字
     - 已使用数字的位掩码
  4. 关键点：用位掩码记录已使用的数字
- **时间复杂度**: O(10 * 2^10 * log n)
- **空间复杂度**: O(2^10 * log n)
- **相关文件**: Code04_NumbersWithRepeatedDigits.java, Code17_NumberWithRepeatedDigits.java

## 二、Codeforces题目

### 1. 55D. Beautiful Numbers
- **题目链接**: https://codeforces.com/problemset/problem/55/D
- **题目描述**: 如果一个正整数能被它的所有非零数字整除，那么这个数就是美丽的。给定区间 [l, r]，求其中美丽数字的个数。
- **解题思路**:
  1. 数位DP方法：使用数位DP框架，逐位确定数字
  2. 状态设计需要记录：
     - 当前处理位置
     - 是否受上界限制
     - 是否已开始填数字
     - 当前数字对LCM(1-9)的余数
     - 已使用数字的LCM
  3. 关键优化：1-9的LCM是2520，所有数字的LCM都是2520的约数
  4. 关键点：一个数能被其所有非零数字整除等价于这个数能被这些数字的最小公倍数(LCM)整除
- **时间复杂度**: O(log r * 2520 * 50)
- **空间复杂度**: O(log r * 2520 * 50)
- **相关文件**: Code13_BeautifulNumbersCF.java, Code13_BeautifulNumbersCF.cpp, Code13_BeautifulNumbersCF.py

### 2. 628D. Magic Numbers
- **题目链接**: https://codeforces.com/problemset/problem/628/D
- **题目描述**: 定义一个d-magic number为满足特定条件的数字，给定区间 [a,b]，求其中magic number的个数。
- **解题思路**:
  1. 数位DP方法：使用数位DP框架，逐位确定数字
  2. 状态设计需要记录：
     - 当前处理位置
     - 是否受上界限制
     - 当前数字对m的余数
     - 当前位置的奇偶性
  3. 关键点：根据位置奇偶性应用不同约束
- **时间复杂度**: O(log b * m)
- **空间复杂度**: O(log b * m)
- **相关文件**: Code14_MagicNumbersCF.java, Code14_MagicNumbersCF.cpp, Code14_MagicNumbersCF.py

## 三、AtCoder题目

### 1. ABC135 D - Digits Parade
- **题目链接**: https://atcoder.jp/contests/abc135/tasks/abc135_d
- **题目描述**: 给定一个由数字和?组成的字符串，?可以替换成0-9的任意数字，求有多少种替换方案使得结果能被13整除。
- **解题思路**:
  1. 数位DP方法：使用数位DP框架，逐位确定数字
  2. 状态设计需要记录：
     - 当前处理位置
     - 当前数字对13的余数
  3. 关键点：'?'可以替换为0-9的任意数字
- **时间复杂度**: O(n * 13)
- **空间复杂度**: O(n * 13)
- **相关文件**: Code15_DigitsParadeABC.java, Code15_DigitsParadeABC.cpp, Code15_DigitsParadeABC.py

## 四、洛谷题目

### 1. P4127 [AHOI2009] 同类分布
- **题目链接**: https://www.luogu.com.cn/problem/P4127
- **题目描述**: 给出两个数 a,b，求出 [a,b] 中各位数字之和能整除原数的数的个数。
- **解题思路**:
  1. 数位DP方法：使用数位DP框架，逐位确定数字
  2. 状态设计需要记录：
     - 当前处理位置
     - 是否受上界限制
     - 是否已开始填数字
     - 当前数位和
     - 当前数值对某个数的余数
  3. 关键点：枚举所有可能的数位和，然后对每个数位和进行数位DP
- **时间复杂度**: O(log b * 162 * 162)
- **空间复杂度**: O(log b * 162 * 162)
- **相关文件**: Code11_SimilarDistribution.java

### 2. P2602 [ZJOI2010] 数字计数
- **题目链接**: https://www.luogu.com.cn/problem/P2602
- **题目描述**: 给定两个正整数 a 和 b，求在 [a,b] 范围上的所有整数中，每个数码 (digit) 各出现了多少次。
- **解题思路**:
  1. 数位DP方法：使用数位DP框架，逐位确定数字
  2. 对于每个数字0-9，分别计算其出现次数
  3. 状态设计需要记录：
     - 当前处理位置
     - 是否受上界限制
     - 是否已开始填数字
     - 当前统计的数字
  4. 关键点：分别统计每个数字的出现次数
- **时间复杂度**: O(log b * 10)
- **空间复杂度**: O(log b * 10)
- **相关文件**: Code09_DigitCount.java, Code09_DigitCount.cpp, Code09_DigitCount.py

## 五、数位DP常见题型总结

### 1. 基础计数问题
- **特征**: 统计满足简单条件的数字个数
- **例题**: 数字1的个数、不含连续1的数字
- **状态设计**: 位置 + 限制标记 + 简单计数

### 2. 数位和问题
- **特征**: 与数字的数位和相关
- **例题**: 数位和在指定范围内、数位和整除原数
- **状态设计**: 位置 + 限制标记 + 数位和 + 余数

### 3. 数字约束问题
- **特征**: 数字必须满足特定模式
- **例题**: 美丽数字、魔法数字
- **状态设计**: 位置 + 限制标记 + 模式状态

### 4. 字符串匹配问题
- **特征**: 结合字符串匹配算法
- **例题**: 不包含特定子串的好字符串
- **状态设计**: 位置 + 限制标记 + KMP状态

### 5. 二进制数位问题
- **特征**: 处理二进制表示
- **例题**: 不含连续1的二进制数
- **状态设计**: 位置 + 限制标记 + 前一位状态

### 6. 通配符问题
- **特征**: 包含通配符的数字
- **例题**: Digits Parade
- **状态设计**: 位置 + 限制标记 + 余数

## 六、解题技巧总结

### 1. 状态设计原则
- **最小化状态数**: 只记录必要的约束信息
- **状态压缩**: 使用位运算压缩多个布尔状态
- **模运算优化**: 利用模运算性质减少状态

### 2. 记忆化优化
- **缓存键设计**: 合理设计记忆化缓存键
- **状态去重**: 识别并合并相同状态
- **提前剪枝**: 在不可能满足条件时提前返回

### 3. 边界处理
- **前导零处理**: 正确处理前导零情况
- **上下界处理**: 正确处理区间边界
- **特殊输入**: 处理n=0, n=1等特殊情况

### 4. 性能优化
- **数学性质利用**: 发现并利用数学规律
- **状态转移优化**: 优化状态转移过程
- **空间优化**: 使用滚动数组等技术优化空间

## 七、代码实现规范

### 1. 文件命名规范
- 使用统一的命名格式：Code{编号}_{题目描述}.{语言}
- 编号从01开始顺序排列
- 题目描述使用驼峰命名法

### 2. 代码结构规范
- 包含完整的题目描述和链接
- 详细的解题思路和时间空间复杂度分析
- 完整的测试用例和性能测试
- 清晰的注释和文档

### 3. 跨语言实现
- 每种题目提供Java、C++、Python三种实现
- 保持算法逻辑的一致性
- 适应各语言特性的优化

## 八、学习路径建议

### 1. 初级阶段
- 先掌握基础数位DP框架
- 练习简单的计数问题
- 理解状态设计和记忆化原理

### 2. 中级阶段
- 学习复杂的状态设计
- 练习数位和、模运算相关问题
- 掌握状态压缩技巧

### 3. 高级阶段
- 学习结合字符串匹配的数位DP
- 练习二进制数位问题
- 掌握性能优化技巧

### 4. 实战阶段
- 参加各大OJ平台的数位DP比赛
- 总结各类题型的解题模式
- 分享解题经验和技巧

## 九、扩展资源

### 1. 在线评测平台
- LeetCode: 丰富的数位DP题目
- Codeforces: 高质量的数位DP比赛题
- AtCoder: 日本编程比赛的数位DP题目
- 洛谷: 中文社区的优秀题目

### 2. 学习资料
- 算法竞赛入门经典：数位DP章节
- 挑战程序设计竞赛：动态规划部分
- 各大博客的技术文章

### 3. 社区讨论
- Stack Overflow: 技术问题解答
- GitHub: 开源代码参考
- 各大技术论坛：经验交流