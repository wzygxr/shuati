# 股票问题系列补充题目

## LeetCode系列

### 1. 股票价格跨度
- **题目**: LeetCode 901. 股票价格跨度
- **链接**: https://leetcode.cn/problems/online-stock-span/
- **难度**: 中等
- **描述**: 设计一个算法收集某些股票的每日报价，并返回该股票当日价格的跨度。
- **解法**: 单调栈

### 2. 股价颜色填充
- **题目**: LeetCode 775. 全局倒置与局部倒置
- **链接**: https://leetcode.cn/problems/global-and-local-inversions/
- **难度**: 中等
- **描述**: 给你一个长度为 n 的整数数组 nums，表示由范围 [0, n - 1] 内所有整数组成的一个排列。
- **解法**: 数学分析

### 3. 最佳观光组合
- **题目**: LeetCode 1014. 最佳观光组合
- **链接**: https://leetcode.cn/problems/best-sightseeing-pair/
- **难度**: 中等
- **描述**: 给定正整数数组 values，values[i] 表示第 i 个观光景点的评分，求一对观光景点能取得的最高分。
- **解法**: 动态规划

### 4. 股票价格波动
- **题目**: LeetCode 2034. 股票价格波动
- **链接**: https://leetcode.cn/problems/stock-price-fluctuation/
- **难度**: 中等
- **描述**: 给你一支股票价格的波动序列，请你实现一个数据结构来处理这些波动。
- **解法**: 哈希表+优先队列

### 5. 最大股票收益
- **题目**: LeetCode 2291. 最大股票收益
- **链接**: https://leetcode.cn/problems/maximum-profit-from-trading-stocks/
- **难度**: 中等
- **描述**: 给定当前价格和未来价格数组，在预算限制下最大化利润
- **解法**: 背包问题动态规划

### 6. 股票平滑下跌阶段的数目
- **题目**: LeetCode 2110. 股票平滑下跌阶段的数目
- **链接**: https://leetcode.cn/problems/number-of-smooth-descent-periods-of-a-stock/
- **难度**: 中等
- **描述**: 计算连续平滑下跌阶段的数量
- **解法**: 一次遍历统计

## HackerRank系列

### 1. Stock Maximize
- **题目**: Stock Maximize
- **链接**: https://www.hackerrank.com/challenges/stockmax/problem
- **难度**: 中等
- **描述**: 给定未来几天的股票价格，计算可以获得的最大利润。
- **解法**: 贪心算法

### 2. Maximum Subarray
- **题目**: Maximum Subarray
- **链接**: https://www.hackerrank.com/challenges/maxsubarray/problem
- **难度**: 中等
- **描述**: 找到数组中连续子数组的最大和。
- **解法**: Kadane算法

## LintCode系列

### 1. 买卖股票
- **题目**: LintCode 149. 买卖股票
- **链接**: https://www.lintcode.com/problem/best-time-to-buy-and-sell-stock/
- **难度**: 简单
- **描述**: 给定一个数组，它的第i个元素是一支给定股票第i天的价格，计算最大利润。
- **解法**: 一次遍历

### 2. 买卖股票 II
- **题目**: LintCode 150. 买卖股票 II
- **链接**: https://www.lintcode.com/problem/best-time-to-buy-and-sell-stock-ii/
- **难度**: 中等
- **描述**: 可以完成多次交易，计算最大利润。
- **解法**: 贪心算法

## CodeChef系列

### 1. Stock Market
- **题目**: Stock Market
- **链接**: https://www.codechef.com/problems/STOCK
- **难度**: 简单
- **描述**: 给定股票价格，计算最大利润。
- **解法**: 动态规划

### 2. Chef and Stock Prices
- **题目**: Chef and Stock Prices
- **链接**: https://www.codechef.com/practice/course/1to2stars/LP1TO201/problems/CSTOCK
- **难度**: 入门
- **描述**: 判断股票价格变化是否值得投资。
- **解法**: 简单比较

## SPOJ系列

### 1. BUYLOW - Buy Low
- **题目**: BUYLOW - Buy Low
- **链接**: https://www.spoj.com/problems/BUYLOW/
- **难度**: 困难
- **描述**: 计算购买股票的最低价格。
- **解法**: 动态规划

## 牛客网系列

### 1. 股票交易
- **题目**: 股票交易
- **链接**: https://www.nowcoder.com/practice/3f47e4f8a0d74900b76d10851c752531
- **难度**: 中等
- **描述**: 给定股票价格序列，计算最大收益。
- **解法**: 动态规划

### 2. 股票交易（含休息日）
- **题目**: 股票交易（含休息日）
- **链接**: https://www.nowcoder.com/practice/9e5e3c2603064829b0a0bbfca10594e9
- **难度**: 中等
- **描述**: 交易后必须休息一天，不能连续买入
- **解法**: 状态机动态规划

## 洛谷系列

### 1. 股票交易
- **题目**: P2569 [SCOI2010] 股票交易
- **链接**: https://www.luogu.com.cn/problem/P2569
- **难度**: 困难
- **描述**: 考虑交易限制的股票交易问题。
- **解法**: 动态规划+单调队列优化

### 2. 股票价格
- **题目**: P1096 Hanoi双塔问题
- **链接**: https://www.luogu.com.cn/problem/P1096
- **难度**: 普及-
- **描述**: 汉诺塔问题的变种。
- **解法**: 递归

## POJ系列

### 1. BUY LOW, BUY LOWER
- **题目**: POJ 1952 - BUY LOW, BUY LOWER
- **链接**: http://poj.org/problem?id=1952
- **难度**: 困难
- **描述**: 计算最长严格递减子序列的长度和数量。
- **解法**: 动态规划

### 2. Stock Chase
- **题目**: POJ 3608 - Stock Chase
- **链接**: http://poj.org/problem?id=3608
- **难度**: 困难
- **描述**: 股票追踪问题。
- **解法**: 图论

## USACO系列

### 1. Buying Feed
- **题目**: Buying Feed
- **链接**: http://www.usaco.org/index.php?page=viewproblem2&cpid=99
- **难度**: 青铜
- **描述**: 购买饲料问题。
- **解法**: 贪心算法

### 2. Stock Market
- **题目**: Stock Market
- **链接**: http://www.usaco.org/index.php?page=viewproblem2&cpid=494
- **难度**: 黄金
- **描述**: 股票市场交易问题。
- **解法**: 动态规划

## AtCoder系列

### 1. Road to Millionaire
- **题目**: M-SOLUTIONS2020 D - Road to Millionaire
- **链接**: https://atcoder.jp/contests/m-solutions2020/tasks/m_solutions2020_d
- **难度**: 中等
- **描述**: 通过股票交易获得最大资金。
- **解法**: 状态机动态规划

### 2. 動物園 (Zoo)
- **题目**: AtCoder ABC 169 D - Div Game
- **链接**: https://atcoder.jp/contests/abc169/tasks/abc169_d
- **难度**: 绿色
- **描述**: 数学游戏问题。
- **解法**: 数论

## Codeforces系列

### 1. Yet Another Palindrome Problem
- **题目**: 1324B - Yet Another Palindrome Problem
- **链接**: https://codeforces.com/problemset/problem/1324/B
- **难度**: 1100
- **描述**: 回文问题。
- **解法**: 字符串处理

### 2. Buy Low Sell High
- **题目**: 865D - Buy Low Sell High
- **链接**: https://codeforces.com/problemset/problem/865/D
- **难度**: 2200
- **描述**: 通过买卖股票获得最大利润。
- **解法**: 贪心算法+优先队列

## 🎯 解题技巧深度总结

### 1. 动态规划（核心技巧）
**适用场景**：有状态转移的股票问题，特别是有限次交易、含约束条件的问题

**关键要点**：
- **状态定义**：明确每个状态的含义（持有、卖出、冷冻等）
- **状态转移**：推导清晰的状态转移方程
- **空间优化**：使用滚动数组或变量代替完整DP表
- **边界处理**：正确处理初始状态和边界条件

**经典模式**：
```java
// 基础状态转移模式
hold[i] = max(hold[i-1], sold[i-1] - prices[i])
sold[i] = max(sold[i-1], hold[i-1] + prices[i])
```

### 2. 贪心算法（高效选择）
**适用场景**：无限次交易、局部最优能推导全局最优的问题

**关键要点**：
- **峰谷识别**：识别所有上升波段
- **交易时机**：在波谷买入，波峰卖出
- **简化策略**：只要明天价格比今天高就交易

**数学证明**：贪心策略能获得全局最优解，因为每次交易都是独立的获利机会

### 3. 单调栈（区间处理）
**适用场景**：需要找到左边/右边第一个更大/更小元素的问题

**关键要点**：
- **单调性维护**：保持栈内元素的单调性
- **出栈条件**：明确何时需要弹出栈顶元素
- **跨度计算**：利用索引差计算区间长度

**时间复杂度**：O(n)，每个元素最多入栈出栈一次

### 4. 状态机思想（复杂约束）
**适用场景**：含冷冻期、手续费等复杂约束的股票问题

**关键要点**：
- **状态划分**：将复杂约束转化为明确的状态
- **转移规则**：定义状态之间的合法转移
- **初始化**：正确处理初始状态的初始值

### 5. 数学优化（性能提升）
**适用场景**：有明显数学规律可以优化的问题

**关键技巧**：
- **分离变量**：将复杂表达式分解为独立部分
- **前缀和**：优化区间求和操作
- **数学归纳**：通过数学推导简化算法

### 6. 反悔贪心（高级技巧）
**适用场景**：Codeforces 865D等需要反悔机制的问题

**关键要点**：
- **优先队列**：使用堆结构维护候选交易
- **反悔机制**：允许撤销之前的交易决策
- **时机选择**：在合适时机执行反悔操作

## 🔍 题型识别与算法选择指南

### 看到以下特征 → 选择相应算法

| 问题特征 | 推荐算法 | 时间复杂度 | 关键思路 |
|---------|----------|------------|----------|
| 只能交易一次 | 一次遍历贪心 | O(n) | 维护历史最低价 |
| 无限次交易 | 贪心算法 | O(n) | 收集所有正收益 |
| 最多k次交易 | 动态规划 | O(nk) | 状态机+空间优化 |
| 含手续费 | 状态机DP | O(n) | 手续费处理时机 |
| 含冷冻期 | 三状态DP | O(n) | 状态转移设计 |
| 价格跨度 | 单调栈 | O(n) | 单调性维护 |
| 复杂约束 | DP+单调队列 | O(n) | 双重优化 |
| 背包限制 | 背包DP | O(nW) | 容量优化 |

## 🚀 高级优化技巧

### 1. 空间压缩技术
```java
// 原始DP：O(n)空间
int[] dp = new int[n];

// 空间压缩：O(1)空间
int prev = 0, curr = 0;
for (int i = 1; i < n; i++) {
    curr = Math.max(prev, ...);
    prev = curr;
}
```

### 2. 剪枝优化策略
- **交易次数剪枝**：当k ≥ n/2时退化为无限交易
- **无效状态跳过**：提前终止不可能达到最优解的分支
- **记忆化搜索**：避免重复计算相同子问题

### 3. 常数项优化
- **循环展开**：减少循环开销
- **局部变量**：使用局部变量代替数组访问
- **提前计算**：预计算常用表达式

## 📊 复杂度分析框架

### 时间复杂度分析
1. **基本操作计数**：统计核心操作执行次数
2. **最坏情况分析**：考虑最差输入情况
3. **平均情况分析**：评估典型输入性能
4. **渐进分析**：使用大O表示法描述增长趋势

### 空间复杂度分析
1. **额外空间统计**：计算算法使用的额外空间
2. **递归栈空间**：考虑递归调用的栈空间
3. **输入空间**：区分输入数据和算法使用的空间

## 🛠️ 工程化实现要点

### 1. 异常处理策略
```java
// 输入验证
if (prices == null || prices.length == 0) {
    throw new IllegalArgumentException("价格数组不能为空");
}

// 边界条件处理
if (k <= 0) return 0;
if (prices.length == 1) return 0;
```

### 2. 性能监控机制
```java
// 性能监控
long startTime = System.currentTimeMillis();
int result = algorithm(prices);
long endTime = System.currentTimeMillis();
logger.info("算法执行时间: {}ms", endTime - startTime);
```

### 3. 测试用例设计
- **正常用例**：验证基本功能
- **边界用例**：测试极端输入
- **性能用例**：评估大规模数据性能
- **异常用例**：验证错误处理

### 4. 多语言实现差异
| 特性 | Java | C++ | Python |
|------|------|-----|--------|
| 数组处理 | ArrayList | vector | list |
| 堆结构 | PriorityQueue | priority_queue | heapq |
| 数学运算 | Math类 | cmath | math模块 |
| 性能特点 | JVM优化 | 原生性能 | 解释执行 |

## 🌟 面试技巧与表达

### 1. 问题分析阶段
- **明确需求**：准确理解题目要求
- **识别约束**：找出所有限制条件
- **举例验证**：通过小例子验证理解

### 2. 算法设计阶段
- **暴力解法**：先提出简单解法
- **优化思路**：逐步优化时间和空间
- **复杂度分析**：明确说明复杂度

### 3. 代码实现阶段
- **清晰命名**：变量名见名知意
- **模块化**：将复杂逻辑分解
- **注释说明**：关键步骤添加注释

### 4. 测试验证阶段
- **用例设计**：设计全面测试用例
- **边界测试**：重点测试边界情况
- **性能评估**：分析算法性能

通过系统掌握这些技巧，您将能够高效解决各种股票交易类问题，并在面试和实际工程中表现出色。

## 复杂度分析

| 题目类型 | 时间复杂度 | 空间复杂度 | 解法 |
|---------|-----------|-----------|------|
| 一次交易 | O(n) | O(1) | 一次遍历 |
| 无限次交易 | O(n) | O(1) | 贪心算法 |
| k次交易 | O(nk) | O(nk) | 动态规划 |
| 含手续费 | O(n) | O(1) | 状态机 |
| 含冷冻期 | O(n) | O(1) | 状态机 |
| 价格跨度 | O(n) | O(n) | 单调栈 |
| 最长递减子序列 | O(n²) | O(n) | 动态规划 |
| 复杂交易限制 | O(T×MaxP) | O(T×MaxP) | 动态规划+优化 |

## 工程化建议

### 1. 输入处理
- 处理边界情况，如空数组、单元素数组
- 验证输入数据的有效性

### 2. 异常处理
- 处理无效输入，如负数价格
- 添加适当的错误提示信息
- 处理交易限制和约束条件

### 3. 性能优化
- 对于大数据集，考虑使用并行处理
- 对于频繁调用，考虑添加缓存机制
- 使用单调队列优化复杂DP问题
- 空间压缩技术减少内存使用

### 4. 可读性
- 变量命名要有意义
- 添加详细注释，解释算法思路
- 提供多个测试用例
- 按照平台和难度分类题目

## 学习路径建议

1. **基础阶段**
   - 掌握一次交易和无限次交易问题
   - 理解贪心和动态规划的基本思想

2. **进阶阶段**
   - 学习有限次交易问题
   - 掌握状态机思想

3. **高级阶段**
   - 学习含限制条件的股票问题
   - 理解复杂状态转移方程的推导
   - 掌握单调栈和单调队列优化技巧

4. **专家阶段**
   - 研究股票问题的扩展变形
   - 掌握多种优化技巧
   - 理解工程化实现和性能调优