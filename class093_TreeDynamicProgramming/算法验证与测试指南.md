# ç®—æ³•éªŒè¯ä¸æµ‹è¯•æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›class078ä¸­æ‰€æœ‰æ ‘å½¢åŠ¨æ€è§„åˆ’ç®—æ³•çš„éªŒè¯å’Œæµ‹è¯•æŒ‡å—ï¼ŒåŒ…æ‹¬ç¼–è¯‘æ–¹æ³•ã€æµ‹è¯•ç”¨ä¾‹ã€æ€§èƒ½æµ‹è¯•å’Œè°ƒè¯•æŠ€å·§ã€‚

## ğŸ› ï¸ ç¼–è¯‘ä¸è¿è¡Œ

### Java ç¨‹åºç¼–è¯‘è¿è¡Œ

```bash
# ç¼–è¯‘å•ä¸ªJavaæ–‡ä»¶
javac Code01_LargestBstSubtree.java

# è¿è¡Œç¨‹åº
java Code01_LargestBstSubtree

# ç¼–è¯‘æ‰€æœ‰Javaæ–‡ä»¶
javac *.java

# è¿è¡Œå¸¦å•å…ƒæµ‹è¯•çš„ç¨‹åº
java -ea Code01_LargestBstSubtree
```

### C++ ç¨‹åºç¼–è¯‘è¿è¡Œ

```bash
# ç¼–è¯‘å•ä¸ªC++æ–‡ä»¶ï¼ˆéœ€è¦ä¿®å¤å¤´æ–‡ä»¶é—®é¢˜ï¼‰
g++ -std=c++11 Code01_LargestBstSubtree.cpp -o Code01_LargestBstSubtree

# è¿è¡Œç¨‹åº
./Code01_LargestBstSubtree

# ç¼–è¯‘ä¼˜åŒ–ç‰ˆæœ¬
g++ -std=c++11 -O2 Code01_LargestBstSubtree.cpp -o Code01_LargestBstSubtree_optimized
```

### Python ç¨‹åºè¿è¡Œ

```bash
# è¿è¡ŒPythonç¨‹åº
python Code01_LargestBstSubtree.py

# è¿è¡Œå•å…ƒæµ‹è¯•
python -m unittest Code01_LargestBstSubtree.py

# è¿è¡Œæ€§èƒ½æµ‹è¯•
python Code01_LargestBstSubtree.py
```

## ğŸ§ª å•å…ƒæµ‹è¯•æŒ‡å—

### æµ‹è¯•ç”¨ä¾‹åˆ†ç±»

#### 1. è¾¹ç•Œæƒ…å†µæµ‹è¯•
- ç©ºæ ‘æµ‹è¯•
- å•èŠ‚ç‚¹æ ‘æµ‹è¯•
- é“¾å¼æ ‘æµ‹è¯•
- å¹³è¡¡æ ‘æµ‹è¯•

#### 2. åŠŸèƒ½æµ‹è¯•
- æ­£å¸¸åŠŸèƒ½éªŒè¯
- å¼‚å¸¸æƒ…å†µå¤„ç†
- å¤æ‚ç»“æ„æµ‹è¯•

#### 3. æ€§èƒ½æµ‹è¯•
- å¤§è§„æ¨¡æ•°æ®æµ‹è¯•
- æœ€åæƒ…å†µæµ‹è¯•
- å†…å­˜ä½¿ç”¨æµ‹è¯•

### æµ‹è¯•ç”¨ä¾‹ç¤ºä¾‹

```python
# æœ€å¤§BSTå­æ ‘æµ‹è¯•ç”¨ä¾‹
def test_complete_bst(self):
    """æµ‹è¯•å®Œå…¨BST"""
    # æ„å»ºå®Œå…¨BST: 
    #       10
    #      /  \
    #     5    15
    #    / \   / \
    #   1   8 12  20
    root = TreeNode(10)
    root.left = TreeNode(5, TreeNode(1), TreeNode(8))
    root.right = TreeNode(15, TreeNode(12), TreeNode(20))
    
    sol = Solution()
    result = sol.largestBSTSubtree(root)
    self.assertEqual(result, 7)  # åº”è¯¥è¿”å›7ä¸ªèŠ‚ç‚¹
```

## ğŸ“Š æ€§èƒ½æµ‹è¯•æŒ‡å—

### æµ‹è¯•æ•°æ®ç”Ÿæˆ

```python
def build_large_tree(n):
    """æ„å»ºå¤§è§„æ¨¡å¹³è¡¡æ ‘"""
    if n <= 0:
        return None
    root = TreeNode(n)
    root.left = build_large_tree(n // 2)
    root.right = build_large_tree(n // 2)
    return root
```

### æ€§èƒ½æŒ‡æ ‡

1. **æ—¶é—´å¤æ‚åº¦**: éªŒè¯ç®—æ³•æ˜¯å¦æ»¡è¶³O(n)å¤æ‚åº¦
2. **ç©ºé—´å¤æ‚åº¦**: æ£€æŸ¥å†…å­˜ä½¿ç”¨æ˜¯å¦åˆç†
3. **å®é™…è¿è¡Œæ—¶é—´**: æµ‹é‡å¤§è§„æ¨¡æ•°æ®ä¸‹çš„æ‰§è¡Œæ—¶é—´
4. **å†…å­˜å ç”¨**: ç›‘æ§ç¨‹åºè¿è¡Œæ—¶çš„å†…å­˜ä½¿ç”¨

### æ€§èƒ½æµ‹è¯•ç¤ºä¾‹

```python
import time

def performance_test():
    """æ€§èƒ½æµ‹è¯•å‡½æ•°"""
    large_tree = build_large_tree(10000)
    sol = Solution()
    
    start_time = time.time()
    result = sol.largestBSTSubtree(large_tree)
    end_time = time.time()
    
    print(f"æ‰§è¡Œæ—¶é—´: {end_time - start_time:.4f}ç§’")
    print(f"ç»“æœ: {result}")
```

## ğŸ”§ è°ƒè¯•æŠ€å·§

### 1. æ‰“å°è°ƒè¯•ä¿¡æ¯

```python
def _dfs(self, node, depth=0):
    """å¸¦è°ƒè¯•ä¿¡æ¯çš„DFS"""
    indent = "  " * depth
    print(f"{indent}å¤„ç†èŠ‚ç‚¹: {node.val if node else 'None'}")
    
    if node is None:
        return base_case
    
    left_info = self._dfs(node.left, depth + 1)
    right_info = self._dfs(node.right, depth + 1)
    
    # å¤„ç†å½“å‰èŠ‚ç‚¹
    current_info = self._combine(left_info, right_info, node)
    print(f"{indent}å½“å‰èŠ‚ç‚¹ä¿¡æ¯: {current_info}")
    
    return current_info
```

### 2. æ–­è¨€æ£€æŸ¥

```python
def _dfs(self, node):
    """å¸¦æ–­è¨€æ£€æŸ¥çš„DFS"""
    if node is None:
        return base_case
    
    # é€’å½’å¤„ç†å­æ ‘
    left_info = self._dfs(node.left)
    right_info = self._dfs(node.right)
    
    # æ–­è¨€æ£€æŸ¥
    assert left_info is not None, "å·¦å­æ ‘ä¿¡æ¯ä¸èƒ½ä¸ºNone"
    assert right_info is not None, "å³å­æ ‘ä¿¡æ¯ä¸èƒ½ä¸ºNone"
    
    # ç»„åˆä¿¡æ¯
    current_info = self._combine(left_info, right_info, node)
    
    return current_info
```

### 3. å¯è§†åŒ–è°ƒè¯•

```python
def print_tree(root, prefix="", is_left=True):
    """æ‰“å°æ ‘ç»“æ„"""
    if root is None:
        print(prefix + ("â”œâ”€â”€ " if is_left else "â””â”€â”€ ") + "null")
        return
    
    print(prefix + ("â”œâ”€â”€ " if is_left else "â””â”€â”€ ") + str(root.val))
    
    if root.left or root.right:
        print_tree(root.left, prefix + ("â”‚   " if is_left else "    "), True)
        print_tree(root.right, prefix + ("â”‚   " if is_left else "    "), False)
```

## ğŸ› å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 1. é€’å½’æ·±åº¦è¿‡å¤§

**é—®é¢˜**: å¤§è§„æ¨¡æ ‘ç»“æ„å¯¼è‡´é€’å½’æ ˆæº¢å‡º

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨è¿­ä»£ç‰ˆæœ¬æ›¿ä»£é€’å½’
- å¢åŠ æ ˆå¤§å°ï¼ˆç³»ç»Ÿè®¾ç½®ï¼‰
- ä¼˜åŒ–é€’å½’ç®—æ³•ï¼Œå‡å°‘æ ˆæ·±åº¦

```python
# è¿­ä»£ç‰ˆæœ¬ç¤ºä¾‹
def iterative_solution(root):
    """è¿­ä»£ç‰ˆæœ¬é¿å…æ ˆæº¢å‡º"""
    stack = []
    result_map = {}
    
    # ååºéå†
    stack.append(root)
    while stack:
        node = stack[-1]
        # å¤„ç†é€»è¾‘...
    
    return final_result
```

### 2. å†…å­˜ä½¿ç”¨è¿‡å¤š

**é—®é¢˜**: å¤§è§„æ¨¡æ•°æ®å¯¼è‡´å†…å­˜ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨æ›´ç´§å‡‘çš„æ•°æ®ç»“æ„
- åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„å†…å­˜
- ä½¿ç”¨ç”Ÿæˆå™¨å‡å°‘å†…å­˜å ç”¨

### 3. æ€§èƒ½ä¸è¾¾æ ‡

**é—®é¢˜**: ç®—æ³•è¿è¡Œæ—¶é—´è¿‡é•¿

**è§£å†³æ–¹æ¡ˆ**:
- åˆ†ææ—¶é—´å¤æ‚åº¦ï¼Œä¼˜åŒ–ç®—æ³•
- ä½¿ç”¨è®°å¿†åŒ–æŠ€æœ¯é¿å…é‡å¤è®¡ç®—
- ä¼˜åŒ–æ•°æ®ç»“æ„å’Œè®¿é—®æ¨¡å¼

## ğŸ“ˆ æµ‹è¯•ç»“æœåˆ†æ

### 1. æ­£ç¡®æ€§éªŒè¯

æ¯ä¸ªç®—æ³•éƒ½åº”é€šè¿‡ä»¥ä¸‹æµ‹è¯•ï¼š
- [x] ç©ºæ ‘æµ‹è¯•
- [x] å•èŠ‚ç‚¹æµ‹è¯•  
- [x] ç®€å•ç»“æ„æµ‹è¯•
- [x] å¤æ‚ç»“æ„æµ‹è¯•
- [x] è¾¹ç•Œæƒ…å†µæµ‹è¯•

### 2. æ€§èƒ½åŸºå‡†

æ€§èƒ½æŒ‡æ ‡åº”æ»¡è¶³ï¼š
- **æ—¶é—´å¤æ‚åº¦**: O(n) æˆ–æ›´å¥½
- **ç©ºé—´å¤æ‚åº¦**: O(n) æˆ–æ›´å¥½
- **å®é™…è¿è¡Œæ—¶é—´**: åœ¨åˆç†èŒƒå›´å†…
- **å†…å­˜ä½¿ç”¨**: ä¸è¶…è¿‡ç³»ç»Ÿé™åˆ¶

### 3. è·¨è¯­è¨€ä¸€è‡´æ€§

ä¸åŒè¯­è¨€å®ç°åº”è¯¥ï¼š
- äº§ç”Ÿç›¸åŒçš„ç»“æœ
- å…·æœ‰ç›¸ä¼¼çš„æ€§èƒ½ç‰¹å¾
- éµå¾ªç›¸åŒçš„ç®—æ³•é€»è¾‘

## ğŸ” ä»£ç è´¨é‡æ£€æŸ¥

### 1. ä»£ç è§„èŒƒ

- [ ] å˜é‡å‘½åæ¸…æ™°æ˜“æ‡‚
- [ ] å‡½æ•°åŠŸèƒ½å•ä¸€æ˜ç¡®
- [ ] æ³¨é‡Šè¯¦ç»†å‡†ç¡®
- [ ] ä»£ç ç»“æ„æ¸…æ™°

### 2. é”™è¯¯å¤„ç†

- [ ] å‚æ•°æ ¡éªŒå®Œå–„
- [ ] å¼‚å¸¸å¤„ç†åˆç†
- [ ] è¾¹ç•Œæƒ…å†µå¤„ç†
- [ ] å†…å­˜ç®¡ç†æ­£ç¡®

### 3. æµ‹è¯•è¦†ç›–

- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ä¸»è¦åŠŸèƒ½
- [ ] è¾¹ç•Œæµ‹è¯•è¦†ç›–ç‰¹æ®Šæƒ…å†µ
- [ ] æ€§èƒ½æµ‹è¯•éªŒè¯æ•ˆç‡
- [ ] é›†æˆæµ‹è¯•éªŒè¯æ•´ä½“åŠŸèƒ½

## ğŸ¯ éªŒè¯ checklist

### ç®—æ³•æ­£ç¡®æ€§
- [ ] ç©ºæ ‘å¤„ç†æ­£ç¡®
- [ ] å•èŠ‚ç‚¹æ ‘å¤„ç†æ­£ç¡®
- [ ] ç®€å•ç»“æ„ç»“æœæ­£ç¡®
- [ ] å¤æ‚ç»“æ„ç»“æœæ­£ç¡®
- [ ] è¾¹ç•Œæƒ…å†µå¤„ç†æ­£ç¡®

### æ€§èƒ½è¦æ±‚
- [ ] æ—¶é—´å¤æ‚åº¦æ»¡è¶³O(n)
- [ ] ç©ºé—´å¤æ‚åº¦åˆç†
- [ ] å¤§è§„æ¨¡æ•°æ®è¿è¡Œæ­£å¸¸
- [ ] å†…å­˜ä½¿ç”¨åœ¨åˆç†èŒƒå›´

### ä»£ç è´¨é‡
- [ ] ä»£ç ç¼–è¯‘æ— é”™è¯¯
- [ ] å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] ä»£ç æ³¨é‡Šå®Œæ•´
- [ ] é”™è¯¯å¤„ç†å®Œå–„

## ğŸ“ æµ‹è¯•æŠ¥å‘Šæ¨¡æ¿

```markdown
# ç®—æ³•æµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•ç¯å¢ƒ
- æ“ä½œç³»ç»Ÿ: 
- ç¼–ç¨‹è¯­è¨€: 
- ç¼–è¯‘å™¨ç‰ˆæœ¬: 
- æµ‹è¯•æ—¶é—´: 

## æµ‹è¯•ç»“æœ
### æ­£ç¡®æ€§æµ‹è¯•
- [ ] ç©ºæ ‘æµ‹è¯•: é€šè¿‡/å¤±è´¥
- [ ] å•èŠ‚ç‚¹æµ‹è¯•: é€šè¿‡/å¤±è´¥
- [ ] ç®€å•ç»“æ„æµ‹è¯•: é€šè¿‡/å¤±è´¥
- [ ] å¤æ‚ç»“æ„æµ‹è¯•: é€šè¿‡/å¤±è´¥

### æ€§èƒ½æµ‹è¯•
- æµ‹è¯•æ•°æ®è§„æ¨¡: 
- æ‰§è¡Œæ—¶é—´: 
- å†…å­˜ä½¿ç”¨: 
- æ˜¯å¦ç¬¦åˆé¢„æœŸ: 

### é—®é¢˜ä¸æ”¹è¿›
- å‘ç°çš„é—®é¢˜: 
- æ”¹è¿›å»ºè®®: 
- åç»­è®¡åˆ’: 
```

## ğŸš€ ä¸‹ä¸€æ­¥å·¥ä½œ

1. **ä¿®å¤ç¼–è¯‘é—®é¢˜**: è§£å†³C++å¤´æ–‡ä»¶åŒ…å«é—®é¢˜
2. **å®Œå–„æµ‹è¯•ç”¨ä¾‹**: å¢åŠ æ›´å¤šè¾¹ç•Œæƒ…å†µæµ‹è¯•
3. **æ€§èƒ½ä¼˜åŒ–**: å¯¹æ€§èƒ½ç“¶é¢ˆè¿›è¡Œä¼˜åŒ–
4. **æ–‡æ¡£å®Œå–„**: è¡¥å……ç®—æ³•åŸç†å’Œåº”ç”¨åœºæ™¯
5. **æ‰©å±•åŠŸèƒ½**: æ·»åŠ æ›´å¤šæ ‘å½¢DPç®—æ³•

é€šè¿‡éµå¾ªæœ¬æŒ‡å—ï¼Œæ‚¨å¯ä»¥ç³»ç»Ÿåœ°éªŒè¯å’Œæµ‹è¯•class078ä¸­çš„æ‰€æœ‰æ ‘å½¢åŠ¨æ€è§„åˆ’ç®—æ³•ï¼Œç¡®ä¿å…¶æ­£ç¡®æ€§ã€æ€§èƒ½å’Œä»£ç è´¨é‡ã€‚