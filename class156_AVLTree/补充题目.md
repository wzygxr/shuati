# Class148补充题目汇总

## 概述
本文件汇总了AVL树和平衡二叉搜索树相关的算法题目，涵盖了从基础模板题到高级应用题的各个层次。

## 题目列表

### 1. 洛谷 P3369 【模板】普通平衡树
- **链接**: https://www.luogu.com.cn/problem/P3369
- **题目描述**: 实现一个普通平衡树，支持插入、删除、查询排名、查询第k小值、查询前驱和后继
- **时间复杂度**: O(log n) 每次操作
- **空间复杂度**: O(n)
- **适用文件**: 
  - [Code01_AVL1.java](Code01_AVL1.java)
  - [Code01_AVL2.java](Code01_AVL2.java)
  - [Code01_AVL.py](Code01_AVL.py)
  - [Code01_AVL.cpp](Code01_AVL.cpp)

### 2. 洛谷 P6136 【模板】普通平衡树（数据加强版）
- **链接**: https://www.luogu.com.cn/problem/P6136
- **题目描述**: P3369的数据加强版，强制在线，需要更高的效率和更强的实现
- **时间复杂度**: O(log n) 每次操作
- **空间复杂度**: O(n)
- **适用文件**: 
  - [FollowUp1.java](FollowUp1.java)
  - [FollowUp2.java](FollowUp2.java)
  - [FollowUp1.py](FollowUp1.py)
  - [FollowUp2.py](FollowUp2.py)
  - [FollowUp1.cpp](FollowUp1.cpp)

### 3. LeetCode 406. Queue Reconstruction by Height
- **链接**: https://leetcode.cn/problems/queue-reconstruction-by-height/
- **题目描述**: 重构队列，每个人有身高和前面比他高的人数要求，需要重构满足条件的队列
- **时间复杂度**: O(n log n)
- **空间复杂度**: O(n)
- **适用文件**: 
  - [Code02_ReconstructionQueue.java](Code02_ReconstructionQueue.java)
  - [Code02_ReconstructionQueue.py](Code02_ReconstructionQueue.py)
  - [Code02_ReconstructionQueue.cpp](Code02_ReconstructionQueue.cpp)

### 4. PAT甲级 1066 Root of AVL Tree
- **链接**: https://pintia.cn/problem-sets/994805342720868352/exam/problems/994805404939173888
- **题目描述**: 给定插入序列，构建AVL树，输出根节点的值
- **时间复杂度**: O(n log n)
- **空间复杂度**: O(n)
- **适用文件**: 所有AVL实现文件

### 5. PAT甲级 1123 Is It a Complete AVL Tree
- **链接**: https://pintia.cn/problem-sets/994805342720868352/exam/problems/994805355103797248
- **题目描述**: 判断构建的AVL树是否是完全二叉树
- **时间复杂度**: O(n log n)
- **空间复杂度**: O(n)
- **适用文件**: 所有AVL实现文件

### 6. LeetCode 220. Contains Duplicate III
- **链接**: https://leetcode.cn/problems/contains-duplicate-iii/
- **题目描述**: 判断数组中是否存在两个不同下标i和j，使得abs(nums[i] - nums[j]) <= t且abs(i - j) <= k
- **时间复杂度**: O(n log k)
- **空间复杂度**: O(k)
- **适用文件**: 所有AVL实现文件

### 7. Codeforces 459D - Pashmak and Parmida's problem
- **链接**: https://codeforces.com/problemset/problem/459/D
- **题目描述**: 计算满足条件的点对数量
- **时间复杂度**: O(n log n)
- **空间复杂度**: O(n)
- **适用文件**: 所有AVL实现文件

### 8. SPOJ Ada and Behives
- **链接**: https://www.spoj.com/problems/ADAAPHID/
- **题目描述**: 维护一个动态集合，支持插入和查询操作
- **时间复杂度**: O(log n) 每次操作
- **空间复杂度**: O(n)
- **适用文件**: 所有AVL实现文件

### 9. HackerRank Self-Balancing Tree
- **链接**: https://www.hackerrank.com/challenges/self-balancing-tree/problem
- **题目描述**: 实现AVL树的插入操作
- **时间复杂度**: O(log n)
- **空间复杂度**: O(n)
- **适用文件**: 所有AVL实现文件

### 10. USACO 2017 December Contest, Platinum Problem 1. Standing Out from the Herd
- **链接**: http://www.usaco.org/index.php?page=viewproblem2&cpid=770
- **题目描述**: 字符串处理问题，可使用平衡树优化
- **时间复杂度**: O(n log n)
- **空间复杂度**: O(n)
- **适用文件**: 所有AVL实现文件

### 11. CodeChef ORDERSET
- **链接**: https://www.codechef.com/problems/ORDERSET
- **题目描述**: 维护有序集合，支持插入、删除、查询排名、查询第k小
- **时间复杂度**: O(log n)
- **空间复杂度**: O(n)
- **适用文件**: 所有AVL实现文件

### 12. AtCoder ABC134 E - Sequence Decomposing
- **链接**: https://atcoder.jp/contests/abc134/tasks/abc134_e
- **题目描述**: 序列分解问题，可使用平衡树优化
- **时间复杂度**: O(n log n)
- **空间复杂度**: O(n)
- **适用文件**: 所有AVL实现文件

### 13. 牛客网 NC145 01序列的最小权值
- **链接**: https://www.nowcoder.com/practice/14c0359fb77a48319f0122ec175c9ada
- **题目描述**: 维护01序列，支持插入和查询操作
- **时间复杂度**: O(n log n)
- **空间复杂度**: O(n)
- **适用文件**: 所有AVL实现文件

### 14. ZOJ 1659 Mobile Phone Coverage
- **链接**: https://zoj.pintia.cn/problem-sets/91827364500/problems/91827368277
- **题目描述**: 计算矩形覆盖面积，可使用平衡树维护
- **时间复杂度**: O(n log n)
- **空间复杂度**: O(n)
- **适用文件**: 所有AVL实现文件

### 15. POJ 1864 [NOI2009] 二叉查找树
- **链接**: http://poj.org/problem?id=1864
- **题目描述**: 二叉查找树的动态规划问题
- **时间复杂度**: O(n^2)
- **空间复杂度**: O(n)
- **适用文件**: 所有AVL实现文件

### 16. LeetCode 98. 验证二叉搜索树
- **链接**: https://leetcode.cn/problems/validate-binary-search-tree/
- **题目描述**: 验证一个二叉树是否是有效的二叉搜索树
- **时间复杂度**: O(n)
- **空间复杂度**: O(h)，h为树高
- **适用文件**: 所有AVL实现文件

### 17. LeetCode 669. 修剪二叉搜索树
- **链接**: https://leetcode.cn/problems/trim-a-binary-search-tree/
- **题目描述**: 修剪二叉搜索树，保留值在[low, high]范围内的节点
- **时间复杂度**: O(n)
- **空间复杂度**: O(h)
- **适用文件**: 所有AVL实现文件

### 18. LeetCode 230. 二叉搜索树中第K小的元素
- **链接**: https://leetcode.cn/problems/kth-smallest-element-in-a-bst/
- **题目描述**: 给定一个二叉搜索树，找出其中第k小的元素
- **时间复杂度**: O(h + k)
- **空间复杂度**: O(h)
- **适用文件**: 所有AVL实现文件

### 19. LeetCode 538. 把二叉搜索树转换为累加树
- **链接**: https://leetcode.cn/problems/convert-bst-to-greater-tree/
- **题目描述**: 将二叉搜索树转换为累加树，每个节点的值变为原树中大于或等于该节点值的所有节点值之和
- **时间复杂度**: O(n)
- **空间复杂度**: O(h)
- **适用文件**: 所有AVL实现文件

### 20. LeetCode 1038. 从二叉搜索树到更大和树
- **链接**: https://leetcode.cn/problems/binary-search-tree-to-greater-sum-tree/
- **题目描述**: 与538题类似，但要求节点值变为所有大于该节点值的节点值之和
- **时间复杂度**: O(n)
- **空间复杂度**: O(h)
- **适用文件**: 所有AVL实现文件

## 题目分类

### 基础模板题
1. 洛谷 P3369 【模板】普通平衡树
2. 洛谷 P6136 【模板】普通平衡树（数据加强版）

### 数据结构应用题
1. LeetCode 406. Queue Reconstruction by Height
2. PAT甲级 1066 Root of AVL Tree
3. PAT甲级 1123 Is It a Complete AVL Tree

### 滑动窗口/范围查询题
1. LeetCode 220. Contains Duplicate III

### 计数问题
1. Codeforces 459D - Pashmak and Parmida's problem

### 动态集合维护题
1. SPOJ Ada and Behives

### 在线算法题
1. 洛谷 P6136 【模板】普通平衡树（数据加强版）

### 字符串处理题
1. USACO 2017 December Contest, Platinum Problem 1. Standing Out from the Herd

### 树形结构题
1. POJ 1864 [NOI2009] 二叉查找树
2. LeetCode 98. 验证二叉搜索树
3. LeetCode 669. 修剪二叉搜索树

## 解题思路总结

### 1. AVL树基础操作
- 插入、删除、查找操作的时间复杂度均为O(log n)
- 通过四种旋转操作（LL、RR、LR、RL）维持树的平衡
- 每个节点维护高度和子树大小信息

### 2. 重建队列问题
- 按身高降序、要求升序排列
- 利用AVL树按索引插入元素
- 通过维护子树大小信息支持按排名查找

### 3. 滑动窗口问题
- 利用AVL树维护滑动窗口内的元素
- 支持快速插入、删除和查询前驱后继
- 时间复杂度优于朴素解法

### 4. 计数问题
- 利用AVL树维护前缀信息
- 支持快速查询范围内的元素个数
- 结合离散化处理大数据范围

## 优化技巧

### 1. 内存优化
- 使用数组代替指针减少内存碎片
- 合理分配和释放节点空间
- 避免不必要的节点创建

### 2. 性能优化
- 维护子树大小信息支持排名查询
- 减少旋转操作的次数
- 优化比较函数和平衡因子计算

### 3. 工程化优化
- 添加异常处理机制
- 提供清晰的接口设计
- 支持在线操作和强制在线场景

## 语言特性差异

### Java
- 对象引用操作直观
- 自动垃圾回收
- 丰富的标准库支持

### C++
- 指针操作更直接
- 需要手动管理内存
- 性能更高但实现更复杂

### Python
- 语法简洁易读
- 动态类型系统
- 性能相对较低但开发效率高

## 学习建议

### 1. 掌握基础概念
- 理解AVL树的平衡性质
- 熟悉四种旋转操作的实现
- 掌握节点信息的维护方法

### 2. 实践编码
- 从简单的插入和查找开始
- 逐步实现完整的AVL树功能
- 练习不同语言的实现方式

### 3. 解题训练
- 从模板题开始练习
- 逐步挑战应用题和高级题
- 总结解题思路和优化技巧

### 4. 性能调优
- 分析时间复杂度和空间复杂度
- 优化常数因子
- 考虑实际应用场景的需求

## 扩展学习

### 1. 其他平衡树
- 红黑树
- Treap
- Splay Tree
- B树/B+树

### 2. 高级应用
- 持久化数据结构
- 并发数据结构
- 近似数据结构

### 3. 实际应用
- 数据库索引
- 文件系统
- 缓存系统