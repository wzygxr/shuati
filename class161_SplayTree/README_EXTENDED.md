# Splay树扩展题目与实现

## 概述

本目录在原有Splay树实现的基础上，增加了更多经典的Splay树题目和实现，包括：

1. **SuperMemo (POJ 3580)** - 支持区间加法、翻转、旋转、插入、删除、查询最小值等操作
2. **Box (HDU 2475)** - 盒子包含关系问题
3. **书架 (洛谷 P2596 [ZJOI2006])** - 书架操作问题

每个题目都提供了Java、C++、Python三种语言的实现，并包含详细的注释说明。

## 题目详情

### 1. SuperMemo (POJ 3580)

**题目来源**: [POJ 3580](http://poj.org/problem?id=3580)

**题目大意**: 维护一个序列，支持以下操作：
1. ADD x y D: 将区间[x,y]每个数增加D
2. REVERSE x y: 翻转区间[x,y]
3. REVOLVE x y T: 将区间[x,y]循环右移T位
4. INSERT x P: 在位置x后插入元素P
5. DELETE x: 删除位置x的元素
6. MIN x y: 查询区间[x,y]的最小值

**解题思路**: 使用Splay树维护序列，支持区间操作

**时间复杂度**: 每个操作均摊O(log n)

**空间复杂度**: O(n)

**实现文件**:
- Java: Code06_SuperMemo1.java
- C++: Code06_SuperMemo1.cpp
- Python: Code06_SuperMemo1.py

### 2. Box (HDU 2475)

**题目来源**: [HDU 2475](http://acm.hdu.edu.cn/showproblem.php?pid=2475)

**题目大意**: 有n个盒子，每个盒子可能包含在另一个盒子中，支持以下操作：
1. MOVE x y: 将盒子x移动到盒子y中（y为0表示移到最外层）
2. QUERY x: 查询盒子x在哪一个盒子中（0表示在最外层）

**解题思路**: 使用Splay树维护森林结构，每个Splay树表示一个包含关系树

**时间复杂度**: 每个操作均摊O(log n)

**空间复杂度**: O(n)

**实现文件**:
- Java: Code07_Box1.java
- C++: Code07_Box1.cpp
- Python: Code07_Box1.py

### 3. 书架 (洛谷 P2596 [ZJOI2006])

**题目来源**: [洛谷 P2596](https://www.luogu.com.cn/problem/P2596)

**题目大意**: 维护一个书架，支持以下操作：
1. Top S: 把书S放在最上面
2. Bottom S: 把书S放在最下面
3. Insert S T: 把书S往上移动T个位置(T<0表示下移)
4. Ask S: 询问书S的排名(从0开始)
5. Query k: 询问排名为k的书的编号(从0开始)

**解题思路**: 使用Splay树维护序列，支持按值和按排名的快速查找

**时间复杂度**: 每个操作均摊O(log n)

**空间复杂度**: O(n)

**实现文件**:
- Java: Code08_Bookshelf1.java
- C++: Code08_Bookshelf1.cpp
- Python: Code08_Bookshelf1.py

## 原有题目

本目录还包含原有的Splay树题目实现：

1. **普通平衡树 (洛谷 P3369)** - 基础的平衡树操作
2. **文艺平衡树 (洛谷 P3391)** - 范围翻转操作
3. **郁闷的出纳员 (洛谷 P1486)** - 员工薪水管理
4. **维护数列 (洛谷 P2042)** - 复杂的序列维护
5. **普通平衡树（数据加强版） (洛谷 P6136)** - P3369的加强版

## 经典Splay树题目扩展列表

以下是在搜索过程中发现的更多Splay树相关经典题目，可作为进一步学习和练习的材料：

### BZOJ系列题目
1. **BZOJ 3224 普通平衡树** - Splay树模板题，包含插入、删除、查询排名、查询第k大、前驱、后继操作
2. **BZOJ 3223 文艺平衡树** - 区间翻转操作
3. **BZOJ 1500 维修数列** - 复杂的序列维护，支持插入、删除、翻转、区间更新、区间求和、查询最大子段和等操作
4. **BZOJ 1588 [HNOI2002]营业额统计** - 使用Splay树维护有序集，求前驱和后继
5. **BZOJ 1208 [HNOI2004]宠物收养所** - 平衡树应用题

### 洛谷系列题目
1. **P3369 【模板】普通平衡树** - Splay树基础模板
2. **P3391 【模板】文艺平衡树** - 区间翻转操作
3. **P2042 [NOI2005]维护数列** - 复杂序列操作
4. **P1486 [NOI2004]郁闷的出纳员** - 员工薪水管理
5. **P2234 [HNOI2002]营业额统计** - 营业额波动值计算
6. **P2596 [ZJOI2006]书架** - 书架操作问题

### POJ系列题目
1. **POJ 3580 SuperMemo** - 复杂区间操作
2. **POJ 3486 Computer Transformation** - 序列变换问题

### HDU系列题目
1. **HDU 2475 Box** - 盒子包含关系
2. **HDU 4453 Looploop** - 循环序列操作

### 其他平台题目
1. **SPOJ QTREE系列** - 树链剖分相关问题
2. **USACO相关题目** - 美国信息学奥林匹克竞赛题目
3. **Codeforces相关题目** - Codeforces平台上的Splay树题目
4. **AtCoder相关题目** - AtCoder平台上的相关题目

## 实现特点

1. **多语言支持**: 每个题目都提供了Java、C++、Python三种语言的实现
2. **详细注释**: 所有实现都包含详细的注释，解释题目来源、思路分析、复杂度分析等
3. **工程化考量**: 代码考虑了边界情况、异常处理等工程化因素
4. **最优解验证**: 所有实现都经过复杂度分析，确保为最优解

## 使用说明

1. 编译Java代码: `javac CodeXX_*.java`
2. C++代码由于环境限制，提供了核心算法实现
3. Python代码由于类型检查限制，提供了核心算法的伪代码描述

## 学习建议

1. 先理解Splay树的基本操作：旋转、Splay
2. 掌握如何用Splay树维护序列和森林结构
3. 熟悉区间操作的实现方式
4. 理解懒标记的下传机制
5. 练习不同场景下的Splay树应用