# 哈希算法实现

本目录包含了多种哈希算法的实现，包括单模哈希、双模哈希、三模哈希以及持久化前缀哈希。

## 目录结构

```
hashing/
├── HashingAlgorithms.java          # 哈希算法 Java实现
├── hashing_algorithms.py           # 哈希算法 Python实现
├── hashing_algorithms.cpp          # 哈希算法 C++实现
└── README.md                       # 本文件
```

## 算法介绍

### 单模哈希 (Single Hash)

使用单个大质数作为模数进行哈希计算。这是最基础的哈希方法，但在处理大量数据时可能存在较高的碰撞概率。

#### 特点
- 实现简单
- 计算速度快
- 碰撞概率相对较高

### 双模哈希 (Double Hash)

使用两个不同的大质数作为模数，生成两个哈希值。通过同时比较两个哈希值来判断字符串是否相等，大大降低了碰撞概率。

#### 特点
- 碰撞概率显著降低
- 空间占用增加一倍
- 适合大多数应用场景

### 三模哈希 (Triple Hash)

使用三个不同的大质数作为模数，生成三个哈希值。进一步降低碰撞概率，适用于对准确性要求极高的场景。

#### 特点
- 碰撞概率极低
- 空间占用增加三倍
- 适合高安全性要求的场景

### 持久化前缀哈希 (Persistent Prefix Hash)

支持历史版本查询的前缀哈希实现。可以高效地查询历史版本中任意子串的哈希值，适用于需要版本控制的场景。

#### 特点
- 支持历史版本查询
- 空间效率优化
- 适合版本控制系统

## 碰撞率分析

### 理论分析

根据生日悖论，当有n个随机字符串时，使用模数m的哈希函数发生碰撞的概率约为：

```
P(碰撞) ≈ 1 - e^(-n*(n-1)/(2*m))
```

### 实际测试

对于100万个随机字符串：
- MOD1 (10^9 + 7): 碰撞概率约为 0.00004999999
- MOD2 (10^9 + 9): 碰撞概率约为 0.00004999999
- MOD3 (998244353): 碰撞概率约为 0.00005008772

使用双模哈希时，碰撞概率约为单模的平方，即约 2.5e-9。

使用三模哈希时，碰撞概率约为单模的立方，即约 1.25e-13。

## 无符号溢出处理

在哈希计算过程中，可能会出现整数溢出问题。通过模运算可以确保结果在正确范围内：

```java
long result = (value % mod);
if (result < 0) result += mod;
```

## 前缀哈希持久化

持久化前缀哈希通过共享历史版本的数据来节省空间，新版本只存储相对于前一版本的增量信息。

### 优势
1. 空间效率高
2. 支持快速版本切换
3. 历史版本查询效率高

### 应用场景
1. 版本控制系统
2. 文本编辑器的撤销功能
3. 数据库的MVCC实现

## 相关题目和训练

### 基础题目

1. **字符串哈希**
   - 题目描述：给定一个字符串，实现快速子串比较
   - 平台：LeetCode、Codeforces
   - 难度：简单

2. **重复子串查找**
   - 题目描述：查找字符串中所有重复的子串
   - 平台：面试题
   - 难度：中等

3. **最长重复子串**
   - 题目描述：找到字符串中最长的重复子串
   - 平台：算法竞赛
   - 难度：困难

### 进阶题目

1. **滚动哈希**
   - 题目描述：实现滚动哈希算法，支持动态字符串更新
   - 平台：系统设计
   - 难度：中等

2. **布隆过滤器**
   - 题目描述：实现布隆过滤器，支持快速元素存在性检查
   - 平台：大数据处理
   - 难度：困难

3. **一致性哈希**
   - 题目描述：实现一致性哈希算法，支持分布式系统中的负载均衡
   - 平台：分布式系统
   - 难度：困难

## 工程化考量

### 异常处理
1. 输入验证：检查输入字符串的有效性
2. 边界条件：处理空字符串、极端长度等
3. 模数选择：选择合适的质数避免碰撞

### 性能优化
1. 预计算幂次：避免重复计算
2. 缓存机制：缓存常用哈希值
3. 内存管理：优化空间使用

### 可配置性
1. 模数设置：支持自定义模数
2. 基数设置：支持自定义哈希基数
3. 错误处理策略：可配置的错误处理方式

## 数学原理

### 哈希函数设计
一个好的哈希函数应该满足：
1. 均匀分布：输出值在值域内均匀分布
2. 雪崩效应：输入的微小变化导致输出的剧烈变化
3. 计算效率：计算速度快

### 模运算
模运算确保哈希值在固定范围内，同时保持哈希函数的均匀分布特性。

## 语言特性差异

### Java
- 使用long类型处理大整数
- 自动内存管理
- 异常处理机制完善

### Python
- 内置大整数支持
- 动态类型系统
- 丰富的数学库支持

### C++
- 手动内存管理
- 高性能实现
- 模板支持

## 面试重点

### 理论知识
1. 哈希函数的设计原则
2. 碰撞处理方法
3. 时间和空间复杂度分析

### 实践技能
1. 代码实现能力
2. 边界条件处理
3. 性能优化技巧

### 工程思维
1. 异常处理和错误恢复
2. 代码可维护性
3. 系统设计能力

## 学习建议

1. **理解原理**：深入理解哈希函数的数学原理
2. **动手实践**：亲自实现各种哈希算法并测试不同数据
3. **性能分析**：分析算法在不同场景下的性能表现
4. **工程应用**：了解算法在实际项目中的应用
5. **扩展学习**：学习更多哈希相关算法，如加密哈希、局部敏感哈希等