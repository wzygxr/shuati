# 带权并查集相关题目列表

## 经典题目

### 1. 区间和问题
1. [洛谷 P8779 推导部分和](https://www.luogu.com.cn/problem/P8779)
2. [HDU 3038 How Many Answers Are Wrong](https://acm.hdu.edu.cn/showproblem.php?pid=3038)
3. [洛谷 P2294 狡猾的商人](https://www.luogu.com.cn/problem/P2294)

### 2. 队列操作问题
1. [洛谷 P1196 银河英雄传说](https://www.luogu.com.cn/problem/P1196)
2. [POJ 1988 Cube Stacking](http://poj.org/problem?id=1988)

### 3. 变量关系推导问题
1. [LeetCode 399 除法求值](https://leetcode.cn/problems/evaluate-division/)
2. [LeetCode 990 Satisfiability of Equality Equations](https://leetcode.com/problems/satisfiability-of-equality-equations/)
3. [LeetCode 1202 Smallest String With Swaps](https://leetcode.com/problems/smallest-string-with-swaps/)

### 4. 种类并查集问题
1. [洛谷 P2024 食物链](https://www.luogu.com.cn/problem/P2024)
2. [POJ 1182 食物链](http://poj.org/problem?id=1182)

### 5. 敌对关系处理问题
1. [洛谷 P1525 关押罪犯](https://www.luogu.com.cn/problem/P1525)
2. [洛谷 P1892 团伙](https://www.luogu.com.cn/problem/P1892)
3. [HDU 1829 A Bug's Life](https://acm.hdu.edu.cn/showproblem.php?pid=1829)
4. [POJ 2492 A Bug's Life](http://poj.org/problem?id=2492)

### 6. 异或关系问题
1. [HDU 3234 Exclusive-OR](https://acm.hdu.edu.cn/showproblem.php?pid=3234)
2. [UVA 12232 Exclusive OR](https://vjudge.net/problem/UVA-12232)
3. [HDU 3635 Dragon Balls](https://acm.hdu.edu.cn/showproblem.php?pid=3635)
4. [POJ 1733 Parity game](http://poj.org/problem?id=1733)

### 7. 连通性问题
1. [LeetCode 721 Accounts Merge](https://leetcode.com/problems/accounts-merge/)
2. [LeetCode 684 Redundant Connection](https://leetcode.com/problems/redundant-connection/)
3. [LeetCode 1319 Number of Operations to Make Network Connected](https://leetcode.com/problems/number-of-operations-to-make-network-connected/)
4. [LeetCode 947 Most Stones Removed with Same Row or Column](https://leetcode.com/problems/most-stones-removed-with-same-row-or-column/)
5. [LeetCode 1697 Checking Existence of Edge Length Limited Paths](https://leetcode.com/problems/checking-existence-of-edge-length-limited-paths/)

### 8. 其他高级应用
1. [ZOJ 3261 Connections in Galaxy War](https://vjudge.net/problem/ZOJ-3261)
2. [POJ 2912 Rochambeau](http://poj.org/problem?id=2912)
3. [AtCoder ABC214 D Sum of Maximum Weights](https://atcoder.jp/contests/abc214/tasks/abc214_d)
4. [Codeforces 1285D Dr. Evil Underscores](https://codeforces.com/problemset/problem/1285/D)
5. [Codeforces 1552D Array Differentiation](https://codeforces.com/problemset/problem/1552/D)
6. [SPOJ COT2 Count on a tree II](https://www.spoj.com/problems/COT2/)

## 平台题目汇总

### 洛谷 (Luogu)
- [P8779 推导部分和](https://www.luogu.com.cn/problem/P8779)
- [P2294 狡猾的商人](https://www.luogu.com.cn/problem/P2294)
- [P1196 银河英雄传说](https://www.luogu.com.cn/problem/P1196)
- [P2024 食物链](https://www.luogu.com.cn/problem/P2024)
- [P1525 关押罪犯](https://www.luogu.com.cn/problem/P1525)
- [P1892 团伙](https://www.luogu.com.cn/problem/P1892)

### HDU
- [3038 How Many Answers Are Wrong](https://acm.hdu.edu.cn/showproblem.php?pid=3038)
- [1829 A Bug's Life](https://acm.hdu.edu.cn/showproblem.php?pid=1829)
- [3234 Exclusive-OR](https://acm.hdu.edu.cn/showproblem.php?pid=3234)
- [3635 Dragon Balls](https://acm.hdu.edu.cn/showproblem.php?pid=3635)

### POJ
- [1182 食物链](http://poj.org/problem?id=1182)
- [2492 A Bug's Life](http://poj.org/problem?id=2492)
- [1988 Cube Stacking](http://poj.org/problem?id=1988)
- [1733 Parity game](http://poj.org/problem?id=1733)
- [2912 Rochambeau](http://poj.org/problem?id=2912)

### LeetCode
- [399 除法求值](https://leetcode.cn/problems/evaluate-division/)
- [990 Satisfiability of Equality Equations](https://leetcode.com/problems/satisfiability-of-equality-equations/)
- [1202 Smallest String With Swaps](https://leetcode.com/problems/smallest-string-with-swaps/)
- [721 Accounts Merge](https://leetcode.com/problems/accounts-merge/)
- [684 Redundant Connection](https://leetcode.com/problems/redundant-connection/)
- [1319 Number of Operations to Make Network Connected](https://leetcode.com/problems/number-of-operations-to-make-network-connected/)
- [947 Most Stones Removed with Same Row or Column](https://leetcode.com/problems/most-stones-removed-with-same-row-or-column/)
- [1697 Checking Existence of Edge Length Limited Paths](https://leetcode.com/problems/checking-existence-of-edge-length-limited-paths/)

### UVA
- [12232 Exclusive OR](https://vjudge.net/problem/UVA-12232)

### ZOJ
- [3261 Connections in Galaxy War](https://vjudge.net/problem/ZOJ-3261)

### AtCoder
- [ABC214 D Sum of Maximum Weights](https://atcoder.jp/contests/abc214/tasks/abc214_d)

### Codeforces
- [1285D Dr. Evil Underscores](https://codeforces.com/problemset/problem/1285/D)
- [1552D Array Differentiation](https://codeforces.com/problemset/problem/1552/D)

### SPOJ
- [COT2 Count on a tree II](https://www.spoj.com/problems/COT2/)

## 题目分类

### 按数据结构类型分类

#### 1. 基础带权并查集
- 维护区间和关系
- 维护相对距离
- 维护倍数关系

#### 2. 种类并查集（扩展域并查集）
- 处理多种类关系（如食物链）
- 处理敌对关系
- 处理朋友敌人关系

#### 3. 异或并查集
- 维护异或关系
- 处理位运算约束
- 处理奇偶性问题

#### 4. 逆向并查集
- 处理删除操作
- 离线处理技术

### 按解题方法分类

#### 1. 前缀和转换
- 将区间问题转换为前缀和问题
- 适用于区间和相关问题

#### 2. 路径压缩时维护权重
- 在find操作中更新权重
- 保证权重信息正确性

#### 3. 合并时维护权重
- 在union操作中计算权重关系
- 建立正确的权重约束

#### 4. 一致性检查
- 在合并前检查是否矛盾
- 用于判断数据一致性

#### 5. 离散化技术
- 处理大数据范围
- 坐标压缩

#### 6. 枚举验证
- 枚举假设
- 验证一致性

## 难度分级

### 入门级
1. [洛谷 P8779 推导部分和](https://www.luogu.com.cn/problem/P8779)
2. [洛谷 P2294 狡猾的商人](https://www.luogu.com.cn/problem/P2294)

### 简单级
1. [HDU 3038 How Many Answers Are Wrong](https://acm.hdu.edu.cn/showproblem.php?pid=3038)
2. [洛谷 P1196 银河英雄传说](https://www.luogu.com.cn/problem/P1196)
3. [POJ 1988 Cube Stacking](http://poj.org/problem?id=1988)

### 中等级
1. [LeetCode 399 除法求值](https://leetcode.cn/problems/evaluate-division/)
2. [洛谷 P2024 食物链](https://www.luogu.com.cn/problem/P2024)
3. [POJ 1182 食物链](http://poj.org/problem?id=1182)
4. [LeetCode 990 Satisfiability of Equality Equations](https://leetcode.com/problems/satisfiability-of-equality-equations/)
5. [LeetCode 1202 Smallest String With Swaps](https://leetcode.com/problems/smallest-string-with-swaps/)

### 困难级
1. [洛谷 P1525 关押罪犯](https://www.luogu.com.cn/problem/P1525)
2. [洛谷 P1892 团伙](https://www.luogu.com.cn/problem/P1892)
3. [HDU 3234 Exclusive-OR](https://acm.hdu.edu.cn/showproblem.php?pid=3234)
4. [UVA 12232 Exclusive OR](https://vjudge.net/problem/UVA-12232)
5. [POJ 1733 Parity game](http://poj.org/problem?id=1733)
6. [POJ 2912 Rochambeau](http://poj.org/problem?id=2912)
7. [ZOJ 3261 Connections in Galaxy War](https://vjudge.net/problem/ZOJ-3261)
8. [LeetCode 721 Accounts Merge](https://leetcode.com/problems/accounts-merge/)
9. [LeetCode 684 Redundant Connection](https://leetcode.com/problems/redundant-connection/)
10. [LeetCode 1319 Number of Operations to Make Network Connected](https://leetcode.com/problems/number-of-operations-to-make-network-connected/)
11. [LeetCode 947 Most Stones Removed with Same Row or Column](https://leetcode.com/problems/most-stones-removed-with-same-row-or-column/)
12. [LeetCode 1697 Checking Existence of Edge Length Limited Paths](https://leetcode.com/problems/checking-existence-of-edge-length-limited-paths/)
13. [AtCoder ABC214 D Sum of Maximum Weights](https://atcoder.jp/contests/abc214/tasks/abc214_d)
14. [Codeforces 1285D Dr. Evil Underscores](https://codeforces.com/problemset/problem/1285/D)
15. [Codeforces 1552D Array Differentiation](https://codeforces.com/problemset/problem/1552/D)
16. [SPOJ COT2 Count on a tree II](https://www.spoj.com/problems/COT2/)

## 学习建议

### 第一阶段：基础掌握
1. 理解并查集的基本操作（查找、合并）
2. 掌握路径压缩和按秩合并优化
3. 学习带权并查集的基本思想

### 第二阶段：应用练习
1. 练习区间和相关问题
2. 掌握前缀和转换技巧
3. 理解权重维护方法
4. 练习队列操作问题

### 第三阶段：进阶应用
1. 学习种类并查集（扩展域并查集）
2. 掌握敌对关系处理方法
3. 练习复杂约束问题
4. 学习变量关系推导问题

### 第四阶段：高级技巧
1. 学习异或并查集
2. 掌握多种权重维护技巧
3. 练习综合应用问题
4. 学习逆向处理技巧
5. 掌握离散化技术
6. 学习枚举验证方法
7. 练习连通性问题
8. 掌握其他高级应用场景

## 常见错误及注意事项

### 1. 权重更新错误
- 路径压缩时忘记更新权重
- 合并时权重计算错误
- 初始化时权重设置错误

### 2. 边界处理错误
- 数组越界
- 特殊输入处理不当
- 空输入处理错误

### 3. 逻辑错误
- 一致性检查不完整
- 合并条件判断错误
- 查询结果计算错误

### 4. 性能问题
- 没有使用路径压缩
- 没有使用按秩合并
- 时间复杂度过高

## 扩展学习资源

### 相关算法
1. 并查集
2. 差分约束系统
3. 图论基础
4. 离散数学

### 推荐书籍
1. 《算法导论》
2. 《算法竞赛入门经典》
3. 《挑战程序设计竞赛》

### 在线资源
1. [OI Wiki - 并查集](https://oi-wiki.org/ds/dsu/)
2. [LeetCode](https://leetcode.cn/)
3. [洛谷](https://www.luogu.com.cn/)
4. [POJ](http://poj.org/)
5. [HDU OJ](https://acm.hdu.edu.cn/)